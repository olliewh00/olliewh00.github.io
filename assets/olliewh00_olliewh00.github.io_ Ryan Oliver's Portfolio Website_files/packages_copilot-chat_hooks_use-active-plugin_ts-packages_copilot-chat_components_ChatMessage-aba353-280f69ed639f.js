"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["packages_copilot-chat_hooks_use-active-plugin_ts-packages_copilot-chat_components_ChatMessage-aba353"],{7104:(e,a,r)=>{r.d(a,{$:()=>c,b:()=>d});var t=r(74848),s=r(21728),l=r(36523),n=r(34164),i=r(96540);let o=(0,i.createContext)(null);function c(e){let a,r,c,d,u,h,m,p,C,v=(0,s.c)(22),{children:f,disabled:g,containerRef:_,...x}=e,y=(0,l.L)(_),b=(0,i.useRef)(null),[j,w]=(0,i.useState)(!1);v[0]!==y?(a=()=>{let e=new IntersectionObserver(e=>{let[a]=e;return w(!a?.isIntersecting)},{root:y.current,threshold:0,rootMargin:"50px"});return e.observe(b.current),()=>e.disconnect()},r=[y],v[0]=y,v[1]=a,v[2]=r):(a=v[1],r=v[2]),(0,i.useEffect)(a,r);let[N,k]=(0,i.useState)();v[3]!==y?(c=()=>{let e=()=>{if(!y.current)return;let e=getComputedStyle(y.current);k(`calc(${y.current.clientHeight}px - ${e.paddingTop} - ${e.paddingBottom})`)},a=new ResizeObserver(e);return e(),a.observe(y.current),()=>a.disconnect()},d=[y],v[3]=y,v[4]=c,v[5]=d):(c=v[4],d=v[5]),(0,i.useEffect)(c,d),v[6]!==g?(u=e=>{g||b.current?.scrollIntoView({behavior:e,block:"end"})},v[6]=g,v[7]=u):u=v[7];let R=u;v[8]!==j||v[9]!==N||v[10]!==R?(h={isScrolledUp:j,scrollToBottom:R,scrollContainerHeight:N},v[8]=j,v[9]=N,v[10]=R,v[11]=h):h=v[11];let M=h,I=(0,n.$)("ChatScrollContainer-module__container--z_iNX",x.className);return v[12]===Symbol.for("react.memo_cache_sentinel")?(m=(0,t.jsx)("div",{ref:b,style:{height:"1px",marginTop:"-1px"}}),v[12]=m):m=v[12],v[13]!==f||v[14]!==y||v[15]!==x||v[16]!==I?(p=(0,t.jsxs)("div",{ref:y,...x,className:I,children:[f,m]}),v[13]=f,v[14]=y,v[15]=x,v[16]=I,v[17]=p):p=v[17],v[18]!==M||v[19]!==p||v[20]!==o.Provider?(C=(0,t.jsx)(o.Provider,{value:M,children:p}),v[18]=M,v[19]=p,v[20]=o.Provider,v[21]=C):C=v[21],C}let d=()=>{let e=(0,i.useContext)(o);if(!e)throw Error("useChatScroll may only be called in a descendant of ChatScrollContainer");return e};try{o.displayName||(o.displayName="ChatScrollContext")}catch{}try{c.displayName||(c.displayName="ChatScrollContainer")}catch{}},27359:(e,a,r)=>{r.d(a,{v:()=>i});var t=r(21728),s=r(61526),l=r(47789),n=r(38627);function i(){let e,a=(0,t.c)(3),r=(0,l.qw)(),i=(0,s.zy)();return a[0]!==i||a[1]!==r?(e=(0,n.BW)(i,r),a[0]=i,a[1]=r,a[2]=e):e=a[2],e}},46665:(e,a,r)=>{r.d(a,{$:()=>i,V:()=>o});var t=r(74848),s=r(21728),l=r(96540);let n=(0,l.createContext)(void 0),i=e=>{let a,r,l=(0,s.c)(5),{message:i,children:o}=e;l[0]!==i?(a={message:i},l[0]=i,l[1]=a):a=l[1];let c=a;return l[2]!==o||l[3]!==c?(r=(0,t.jsx)(n.Provider,{value:c,children:o}),l[2]=o,l[3]=c,l[4]=r):r=l[4],r},o=()=>{let e=(0,l.useContext)(n);if(!e)throw Error("useChatMessage must be used with ChatMessageProvider.");return e};try{n.displayName||(n.displayName="ChatMessageContext")}catch{}try{i.displayName||(i.displayName="ChatMessageProvider")}catch{}},54508:(e,a,r)=>{r.d(a,{E:()=>u});var t=r(74848),s=r(21728),l=r(73077),n=r(21373),i=r(15220),o=r(96540),c=r(2635);function d(e,a){let r,d,u,h,m=(0,s.c)(11),{title:p,onClose:C}=e,v=void 0===p?"Give feedback":p,[f,g]=(0,o.useState)(!1),{currentUserLogin:_}=(0,c.bP)("currentUserLogin");m[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>({openDialog:()=>g(!0)}),m[0]=r):r=m[0],(0,o.useImperativeHandle)(a,r),m[1]!==C?(d=e=>{g(!1),C?.(e)},m[1]=C,m[2]=d):d=m[2];let x=d;m[3]!==_||m[4]!==x?(u=()=>(0,t.jsxs)("div",{className:"InterviewSurveyDialog-module__body--GX6c_",children:[(0,t.jsx)("img",{alt:"Mona and Copilot flying a Hubot-themed spaceship",src:"/images/modules/copilot-chat/mona-copilot-hubot-spaceship.png",srcSet:"/images/modules/copilot-chat/mona-copilot-hubot-spaceship@2x.png 2x"}),(0,t.jsx)("span",{className:"InterviewSurveyDialog-module__primaryText--H2SlC InterviewSurveyDialog-module__text--WPIpz",children:"Would you like to participate in our research?"}),(0,t.jsx)("span",{className:"InterviewSurveyDialog-module__secondaryText--SQrin InterviewSurveyDialog-module__text--WPIpz",children:"You will be compensated for your time"}),(0,t.jsx)(l.z,{variant:"primary",className:"InterviewSurveyDialog-module__surveyLink--XKIEl",href:`https://gh.io/copilot-feedback-interview-survey?UID=${encodeURIComponent(_)}`,target:"_blank",children:"Book a session"}),(0,t.jsx)(n.Q,{variant:"link",className:"InterviewSurveyDialog-module__noThanksButton--yLSzs",onClick:()=>x("no-thanks"),children:"No, thanks"})]}),m[3]=_,m[4]=x,m[5]=u):u=m[5];let y=u;return m[6]!==x||m[7]!==f||m[8]!==y||m[9]!==v?(h=f&&(0,t.jsx)(i.l,{className:"InterviewSurveyDialog-module__dialog--VJeZO",onClose:()=>x("close"),title:v,renderBody:y}),m[6]=x,m[7]=f,m[8]=y,m[9]=v,m[10]=h):h=m[10],h}let u=(0,o.forwardRef)(d);try{d.displayName||(d.displayName="InterviewSurveyDialogInner")}catch{}try{u.displayName||(u.displayName="InterviewSurveyDialog")}catch{}},77274:(e,a,r)=>{r.d(a,{NE:()=>C,Mm:()=>_,YS:()=>g,mN:()=>b,XF:()=>x,Cf:()=>y,pu:()=>v,ms:()=>f});var t=r(74848),s=r(96540),l=r(86877),n=r(4175),i=r(84268),o=r(11196),c=r(21373),d=r(15220),u=r(38621);let h={verySatisfied:"UserFeedbackColors-module__verySatisfied--HQthN",good:"UserFeedbackColors-module__good--a6lz4",satisfied:"UserFeedbackColors-module__satisfied--R1wkm",dissatisfied:"UserFeedbackColors-module__dissatisfied--fRn_n",veryDissatisfied:"UserFeedbackColors-module__veryDissatisfied--C4vDF",bad:"UserFeedbackColors-module__bad--FROJd"};var m=r(34164);function p({title:e="Give feedback",requestID:a,options:r,returnFocusRef:p,onSubmit:C,onClose:v},f){let[g,_]=(0,s.useState)(null),[x,y]=(0,s.useState)(""),[b,j]=(0,s.useState)([]),[w,N]=(0,s.useState)(0),[k,R]=(0,s.useState)(!1),[M,I]=(0,s.useState)(!1);(0,s.useEffect)(()=>{b.length>0&&N(e=>e+1)},[b]),(0,s.useImperativeHandle)(f,()=>({openDialog:e=>{if(null!=e){if(!r.some(a=>a.value===e))throw Error("invalid initial option value");_(e)}R(!0)}}));let F=e=>{_(null),y(""),j([]),R(!1),v?.(e)},S=async e=>{e.preventDefault();let a=[];try{a=await C(g,x)}catch{a=["An error occurred while submitting your feedback."]}j(a),0===a.length&&F("submit")},L=()=>F("cancel"),U=e=>{y(e.target.value),j([])},T=async()=>{if(a){try{await navigator.clipboard.writeText(`Request ID: ${a}`)}catch{j(e=>[...e,"Failed to copy logs."]);return}I(!0),setTimeout(()=>{I(!1)},1e3)}};return(0,t.jsx)(t.Fragment,{children:k&&(0,t.jsx)(d.l,{onClose:()=>F("dismiss"),title:e,renderBody:()=>(0,t.jsxs)("div",{className:"UserFeedback-module__bodyContainer--G2bmg",children:[(0,t.jsxs)(l.A,{required:!0,children:[(0,t.jsx)(l.A.Label,{visuallyHidden:!0,children:"Rating"}),(0,t.jsx)("div",{className:"UserFeedback-module__ratingContainer--Mg11z",children:r.map(e=>(0,t.jsxs)("div",{className:"UserFeedback-module__ratingOption--ZLoA0",children:[(0,t.jsx)("button",{type:"button",role:"radio","aria-label":e.name,"aria-checked":g===e.value,onClick:()=>{_(e.value),j([])},className:(0,m.$)("UserFeedback-module__ratingButton--wgOnk",h[e.color]),children:e.icon}),(0,t.jsx)("span",{className:"UserFeedback-module__ratingCaption--TCp_8",children:e.name})]},e.name))})]}),(0,t.jsxs)("div",{className:"UserFeedback-module__messageContainer--FW6dD",children:[(0,t.jsxs)(l.A,{children:[(0,t.jsx)(l.A.Label,{children:"Message"}),(0,t.jsx)(n.Ay,{placeholder:"Tell us what you liked or what could be better",value:x,onChange:U,resize:"vertical",block:!0,rows:5})]}),(0,t.jsxs)("span",{className:"UserFeedback-module__privacyText--J0awt",children:["Please don\u2019t include sensitive, confidential, or personal data. Your feedback helps us improve our services in line with our"," ",(0,t.jsx)(i.A,{href:"https://docs.github.com/en/site-policy/privacy-policies/github-general-privacy-statement",inline:!0,muted:!0,children:"Privacy Policy"}),"."]}),(0,t.jsx)("div",{className:"UserFeedback-module__validationError--e3pDo",role:"alert",children:b.map(e=>(0,t.jsx)("div",{children:e},e))},w)]})]}),renderFooter:()=>(0,t.jsxs)("div",{className:"UserFeedback-module__footerContainer--wvEjF",children:[(0,t.jsx)("div",{children:a&&(0,t.jsx)(o.m,{text:"Copy logs to add in feedback",direction:"n",children:(0,t.jsx)(c.Q,{leadingVisual:M?(0,t.jsx)(u.CheckIcon,{className:"UserFeedback-module__copyLogsSuccessIcon--i0uqN",size:16}):(0,t.jsx)(u.CopyIcon,{size:16}),onClick:T,variant:"default",children:M?"Copied!":"Copy logs"})})}),(0,t.jsxs)("div",{className:"UserFeedback-module__footerActionButtonGroup--FzuM1",children:[(0,t.jsx)(c.Q,{onClick:L,children:"Cancel"}),(0,t.jsx)(c.Q,{variant:"primary",type:"submit",onClick:S,children:"Send"})]})]}),className:"UserFeedback-module__Dialog--n5pi6",returnFocusRef:p})})}let C=(0,s.forwardRef)(p),v=(0,t.jsx)(u.ThumbsdownIcon,{className:"UserFeedback-module__thumbsDownIcon--Ion_2"}),f=(0,t.jsx)(u.ThumbsupIcon,{className:"UserFeedback-module__thumbsUpIcon--dBnnS"}),g=(0,t.jsxs)("svg",{width:"16",height:"16","aria-hidden":"true",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.65646 10.7C6.15313 9.85483 7.09616 9.3 8 9.3C8.47794 9.3 9.0345 9.50535 9.54632 9.9146C9.83116 10.1424 10.0753 10.4124 10.2645 10.7H5.65646ZM11.8447 11.016C11.3379 9.39273 9.66897 8 8 8C6.30092 8 4.60185 9.23723 4.12902 11.011C3.98676 11.5446 4.44771 12 5 12H11C11.5523 12 12.0093 11.5432 11.8447 11.016Z"}),(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.89649 4.7586C4.02981 4.42529 4.40809 4.26317 4.7414 4.39649L7.00928 5.30364C7.63789 5.55509 7.6379 6.44491 7.00928 6.69636L4.7414 7.60351C4.40809 7.73683 4.02981 7.57471 3.89649 7.2414C3.76317 6.90809 3.92529 6.52981 4.2586 6.39649L5.24982 6L4.2586 5.60351C3.92529 5.47019 3.76317 5.09191 3.89649 4.7586Z"}),(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.1035 4.7586C11.9702 4.42529 11.5919 4.26317 11.2586 4.39649L8.99072 5.30364C8.36211 5.55509 8.3621 6.44491 8.99072 6.69636L11.2586 7.60351C11.5919 7.73683 11.9702 7.57471 12.1035 7.2414C12.2368 6.90809 12.0747 6.52981 11.7414 6.39649L10.7502 6L11.7414 5.60351C12.0747 5.47019 12.2368 5.09191 12.1035 4.7586Z"})]}),_=(0,t.jsxs)("svg",{width:"16",height:"16","aria-hidden":"true",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,t.jsx)("path",{d:"M6.5 6.5C6.5 7.05228 6.05228 7.5 5.5 7.5C4.94772 7.5 4.5 7.05228 4.5 6.5C4.5 5.94772 4.94772 5.5 5.5 5.5C6.05228 5.5 6.5 5.94772 6.5 6.5Z"}),(0,t.jsx)("path",{d:"M11.5 6.5C11.5 7.05228 11.0523 7.5 10.5 7.5C9.94772 7.5 9.5 7.05228 9.5 6.5C9.5 5.94772 9.94772 5.5 10.5 5.5C11.0523 5.5 11.5 5.94772 11.5 6.5Z"}),(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3416 11.8591C9.33064 10.0058 6.66936 10.0058 5.65842 11.8591C5.46007 12.2228 5.0045 12.3568 4.64086 12.1584C4.27722 11.9601 4.14323 11.5045 4.34158 11.1409C5.92104 8.24518 10.079 8.24518 11.6584 11.1409C11.8568 11.5045 11.7228 11.9601 11.3591 12.1584C10.9955 12.3568 10.5399 12.2228 10.3416 11.8591Z"})]}),x=(0,t.jsxs)("svg",{width:"16","aria-hidden":"true",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,t.jsx)("path",{d:"M6.5 6.5C6.5 7.05228 6.05228 7.5 5.5 7.5C4.94772 7.5 4.5 7.05228 4.5 6.5C4.5 5.94772 4.94772 5.5 5.5 5.5C6.05228 5.5 6.5 5.94772 6.5 6.5Z"}),(0,t.jsx)("path",{d:"M11.5 6.5C11.5 7.05228 11.0523 7.5 10.5 7.5C9.94772 7.5 9.5 7.05228 9.5 6.5C9.5 5.94772 9.94772 5.5 10.5 5.5C11.0523 5.5 11.5 5.94772 11.5 6.5Z"}),(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 11C5 10.5858 5.33579 10.25 5.75 10.25H10.25C10.6642 10.25 11 10.5858 11 11C11 11.4142 10.6642 11.75 10.25 11.75H5.75C5.33579 11.75 5 11.4142 5 11Z"})]}),y=(0,t.jsxs)("svg",{width:"16","aria-hidden":"true",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,t.jsx)("path",{d:"M6.5 6.5C6.5 7.05228 6.05228 7.5 5.5 7.5C4.94772 7.5 4.5 7.05228 4.5 6.5C4.5 5.94772 4.94772 5.5 5.5 5.5C6.05228 5.5 6.5 5.94772 6.5 6.5Z"}),(0,t.jsx)("path",{d:"M11.5 6.5C11.5 7.05228 11.0523 7.5 10.5 7.5C9.94772 7.5 9.5 7.05228 9.5 6.5C9.5 5.94772 9.94772 5.5 10.5 5.5C11.0523 5.5 11.5 5.94772 11.5 6.5Z"}),(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.3569 9.61413C9.28933 11.3934 6.71067 11.3934 5.64312 9.61413C5.43001 9.25894 4.96931 9.14377 4.61413 9.35688C4.25894 9.56999 4.14377 10.0307 4.35688 10.3859C6.00704 13.1361 9.99296 13.1361 11.6431 10.3859C11.8562 10.0307 11.7411 9.56999 11.3859 9.35688C11.0307 9.14377 10.57 9.25894 10.3569 9.61413Z"})]}),b=(0,t.jsxs)("svg",{width:"16","aria-hidden":"true",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.65646 10.3C6.15313 11.1452 7.09616 11.7 8 11.7C8.47794 11.7 9.0345 11.4947 9.54632 11.0854C9.83116 10.8576 10.0753 10.5876 10.2645 10.3H5.65646ZM11.8447 9.98403C11.3379 11.6073 9.66897 13 8 13C6.30092 13 4.60185 11.7628 4.12902 9.98904C3.98676 9.45539 4.44771 9 5 9H11C11.5523 9 12.0093 9.45684 11.8447 9.98403Z"}),(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.5C11.5899 14.5 14.5 11.5899 14.5 8C14.5 4.41015 11.5899 1.5 8 1.5C4.41015 1.5 1.5 4.41015 1.5 8C1.5 11.5899 4.41015 14.5 8 14.5ZM8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}),(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.3292 6.83541C10.9875 6.15213 10.0125 6.15213 9.67082 6.83541C9.48558 7.20589 9.03507 7.35606 8.66459 7.17082C8.29411 6.98558 8.14394 6.53507 8.32918 6.16459C9.22361 4.37574 11.7764 4.37574 12.6708 6.16459C12.8561 6.53507 12.7059 6.98558 12.3354 7.17082C11.9649 7.35606 11.5144 7.20589 11.3292 6.83541Z"}),(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.32918 6.83541C5.98754 6.15213 5.01246 6.15213 4.67082 6.83541C4.48558 7.20589 4.03507 7.35606 3.66459 7.17082C3.29411 6.98558 3.14394 6.53507 3.32918 6.16459C4.22361 4.37574 6.77639 4.37574 7.67082 6.16459C7.85606 6.53507 7.70589 6.98558 7.33541 7.17082C6.96493 7.35606 6.51442 7.20589 6.32918 6.83541Z"})]});try{p.displayName||(p.displayName="UserFeedbackInner")}catch{}try{C.displayName||(C.displayName="UserFeedback")}catch{}},88752:(e,a,r)=>{r.d(a,{t:()=>F,s:()=>M});var t,s=r(74848),l=r(38621),n=r(4908),i=r(23398),o=r(5524),c=r(84268),d=r(10095),u=r(34164),h=r(96540),m=r(25641),p=r(35247),C=r(2635),v=r(23967),f=r(69497),g=r(94236),_=r(33592),x=r(35673),y=r(1631);function b({reference:e,onClick:a}){let r,t=(0,C.Pk)(),n=(0,_.b)(),i=(0,h.useRef)(null),[c,d]=(0,h.useState)(!1),p=t?.mode??"assistive",{currentReferences:v}=t??{currentReferences:[]},b=(0,h.useMemo)(()=>v.map(e=>(0,m.Vb)(e)),[v]),j=(0,h.useMemo)(()=>(0,m.Vb)(e),[e]),w=(0,h.useMemo)(()=>"repo-instructions"===e.type,[e]),N=(0,h.useMemo)(()=>"org-instructions"===e.type,[e]),k=!w&&!N&&"web-search-result"!==e.type,R=(0,h.useMemo)(()=>w||N||b.includes(j),[w,N,b,j]),M=(0,h.useCallback)(a=>{a.stopPropagation(),R||n.addReference(e,"refMenu")},[n,e,R]),I=(0,m.JP)(e),F=(0,m.Xs)(I),S=(0,y.a_)(e,(0,m.P)(t?.currentTopic));switch(e.type){case"file":case"snippet":{r=`${e.repoName}`;let a=e.path.lastIndexOf("/");-1!==a&&(r=`${r}/${e.path.substring(0,a)}`);break}case"web-search-result":r=new URL(e.url,window.location.origin).hostname.replace(/^www\./,"")}let L=(0,m.z$)(e);return(0,s.jsxs)(o.l.LinkItem,{onClick:r=>{a&&!r.defaultPrevented&&a(e,r)},href:I,rel:"noopener",className:(0,u.$)("reference-action","ChatReference-module__ActionList_LinkItem--gopkk"),target:"immersive"===p||"third-party"===e.type?"_blank":void 0,children:[S&&(0,s.jsx)(o.l.LeadingVisual,{children:(0,s.jsx)(S,{})}),(0,s.jsxs)(f.A,{title:L,maxWidth:"100%",className:"text-semibold",children:[L,r&&(0,s.jsx)("span",{className:"color-fg-muted ml-2",children:r})]}),k&&(0,s.jsx)(o.l.TrailingAction,{onClick:()=>d(!0),icon:l.KebabHorizontalIcon,label:"More reference options",ref:i}),k&&(0,s.jsx)(g.W,{anchorRef:i,open:c,onOpenChange:d,children:(0,s.jsx)(x.UJ,{portalContainerName:x.Dq,children:(0,s.jsxs)(o.l,{children:[F&&("immersive"===p||["third-party","folder","repository","docset"].includes(e.type)?(0,s.jsxs)(o.l.LinkItem,{href:I,rel:"noopener",target:"_blank",children:[(0,s.jsx)(o.l.LeadingVisual,{children:(0,s.jsx)(l.LinkIcon,{})}),"Open"]}):(0,s.jsxs)(o.l.Item,{onSelect:()=>{n.selectReference(e)},children:[(0,s.jsx)(o.l.LeadingVisual,{children:(0,s.jsx)(l.LinkIcon,{})}),"Preview"]})),(0,s.jsxs)(o.l.Item,{onSelect:M,disabled:R,children:[(0,s.jsx)(o.l.LeadingVisual,{children:(0,s.jsx)(l.PaperclipIcon,{})}),"Attach to chat"]})]})})})]})}try{b.displayName||(b.displayName="OutputReference")}catch{}try{(t=Icon).displayName||(t.displayName="Icon")}catch{}var j=r(21728),w=r(69726),N=r(89237);let k=(0,h.forwardRef)(function(e,a){let r,t,l,n,i,o,c,d,p,C,v=(0,j.c)(23);v[0]!==e?({reference:r,...t}=e,v[0]=e,v[1]=r,v[2]=t):(r=v[1],t=v[2]);let[f,g]=(0,h.useState)(!0);return v[3]!==r?(l=(0,m.JP)(r),v[3]=r,v[4]=l):l=v[4],v[5]===Symbol.for("react.memo_cache_sentinel")?(n=(0,u.$)("FigmaChatReference-module__referenceToken--PONuv"),v[5]=n):n=v[5],v[6]!==r.thumbnailUrl||v[7]!==r.title||v[8]!==f?(i=r.thumbnailUrl&&(0,s.jsxs)(s.Fragment,{children:[f&&(0,s.jsx)("span",{className:"FigmaChatReference-module__thumbnailLoading--cQ2Uf",children:(0,s.jsx)(w.A,{size:"medium"})}),(0,s.jsx)("img",{className:(0,u.$)("FigmaChatReference-module__thumbnail--mm7QC",{"FigmaChatReference-module__thumbnailHidden--pv7wD":f}),src:r.thumbnailUrl,alt:`preview thumbnail for ${r.title}`,onLoad:()=>g(!1)})]}),v[6]=r.thumbnailUrl,v[7]=r.title,v[8]=f,v[9]=i):i=v[9],v[10]!==i?(o=(0,s.jsx)("span",{className:"FigmaChatReference-module__thumbnailOuter--oMFvD",children:i}),v[10]=i,v[11]=o):o=v[11],v[12]===Symbol.for("react.memo_cache_sentinel")?(c=(0,s.jsx)("div",{className:"FigmaChatReference-module__figmaIconOuter--KtveL",children:(0,s.jsx)(N._,{className:"FigmaChatReference-module__figmaIcon--kEY45"})}),v[12]=c):c=v[12],v[13]!==r?(d=(0,m.z$)(r),v[13]=r,v[14]=d):d=v[14],v[15]!==d?(p=(0,s.jsxs)("span",{className:"FigmaChatReference-module__content--Mpcb0",children:[c,(0,s.jsx)("span",{className:"FigmaChatReference-module__name--XjBR8",children:d})]}),v[15]=d,v[16]=p):p=v[16],v[17]!==a||v[18]!==t||v[19]!==l||v[20]!==o||v[21]!==p?(C=(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("a",{href:l,className:n,ref:a,target:"_blank",rel:"noreferrer",...t,children:[o,p]})}),v[17]=a,v[18]=t,v[19]=l,v[20]=o,v[21]=p,v[22]=C):C=v[22],C});try{k.displayName||(k.displayName="FigmaChatReference")}catch{}var R=r(95896);function M({references:e,onToggle:a,onClick:r,isImmersive:t,className:p}){let v=(0,C.Pk)(),f=(0,h.useMemo)(()=>(0,m.rT)(e),[e]),{getDetailsProps:g}=(0,n.A)({}),_=(0,h.useMemo)(()=>(0,m.P)(v?.currentTopic)&&f.every(I),[v?.currentTopic,f]),x=(0,h.useMemo)(()=>f.some(e=>"web-search-result"===e.type),[f]);if(0===f.length)return null;let y=_&&v?.currentTopic?.name?`Search results from ${v.currentTopic.name}`:`${f.length} ${1===f.length?"reference":"references"}`;return(0,s.jsxs)(i.A,{...g(),onToggle:a,className:(0,u.$)(p,"ChatReferences-module__referencesDetails--Ypv2c"),children:[(0,s.jsxs)("summary",{className:(0,u.$)("ChatReferences-module__referencesContainer--qLjdy"),children:[(0,s.jsx)("span",{className:(0,u.$)("ChatReferences-module__title--d18y3",t?"":"ChatReferences-module__assistiveTitle--Ojcrs"),children:y}),(0,s.jsx)(d.A,{icon:l.ChevronDownIcon,className:(0,u.$)("references-chevron-down","ChatReferences-module__chevronDownIcon--Fv9mJ")}),(0,s.jsx)(d.A,{icon:l.ChevronUpIcon,className:(0,u.$)("references-chevron-up","ChatReferences-module__chevronUpIcon--OPX7R")})]}),(0,s.jsxs)(o.l,{className:(0,u.$)(t&&"ChatReferences-module__referencesListImmersiveContainer--gM5wy","ChatReferences-module__ActionList--ACk2F"),children:[f.map(e=>(0,s.jsx)(b,{reference:e,onClick:r},(0,m.Vb)(e))),x&&(0,s.jsxs)("div",{className:"ChatReferences-module__chatMessageReferenceListFooter--WgJAa",children:["Copilot used the"," ",(0,s.jsx)(c.A,{inline:!0,href:"https://gh.io/azure-ai-agent-with-bing-grounding",target:"_blank",rel:"noopener noreferrer",children:"Bing Search"})," ","tool."," ",(0,s.jsx)(c.A,{inline:!0,href:"https://privacy.microsoft.com/privacystatement",rel:"nofollow",target:"_blank",children:"Microsoft Privacy Statement"})]})]})]})}function I(e){return"snippet"===e.type&&!!e.languageName&&v.Yr.has(e.languageName)}function F({references:e,message:a,className:r,size:t,onClickReference:l,getReferenceVersion:n}){let{bigReferences:i,smallReferences:o}=(0,h.useMemo)(()=>(function(e){let a=(0,m.rT)(e),r=[],t=[];for(let e of a)S.has(e.type)?r.push(e):t.push(e);return{bigReferences:r,smallReferences:t}})(e),[e]),c=e=>"figma"===e.type&&p.W.immersiveFigmaIntegration?(0,s.jsx)(k,{reference:e,onClick:a=>l?.(e,a)},(0,m.Vb)(e)):(0,s.jsx)(y.BR,{message:a,reference:e,size:t,onClick:(a,r)=>l?.(e,r),getReferenceVersion:n},(0,m.Vb)(e));return(0,s.jsxs)(R.M,{"aria-label":"Attachments",className:(0,u.$)("ChatReferences-module__referenceTokensOuterContainer--OV840",r),children:[i.map(c),(0,s.jsx)("div",{className:"ChatReferences-module__referenceTokensContainer--nhf9A",children:o.map(c)})]})}let S=new Set(["figma","image"]);try{M.displayName||(M.displayName="ChatMessageReferencesList")}catch{}try{F.displayName||(F.displayName="ChatMessageReferenceTokens")}catch{}try{S.displayName||(S.displayName="BIG_REFERENCE_TYPES")}catch{}},95896:(e,a,r)=>{r.d(a,{M:()=>o});var t=r(74848),s=r(21728),l=r(11683),n=r(45800),i=r(96540);function o(e){let a,r,o,c,d=(0,s.c)(8);d[0]!==e?({className:a,...r}=e,d[0]=e,d[1]=a,d[2]=r):(a=d[1],r=d[2]);let u=(0,i.useRef)(null);return d[3]===Symbol.for("react.memo_cache_sentinel")?(o={containerRef:u,focusInStrategy:"first",focusOutBehavior:"stop",bindKeys:l.z0.ArrowHorizontal|l.z0.HomeAndEnd},d[3]=o):o=d[3],(0,n.G)(o),d[4]!==a||d[5]!==e.children||d[6]!==r?(c=(0,t.jsx)("div",{ref:u,className:a,role:"toolbar",...r,children:e.children}),d[4]=a,d[5]=e.children,d[6]=r,d[7]=c):c=d[7],c}try{o.displayName||(o.displayName="Toolbar")}catch{}}}]);
//# sourceMappingURL=packages_copilot-chat_hooks_use-active-plugin_ts-packages_copilot-chat_components_ChatMessage-aba353-bb641c346a95.js.map